<!DOCTYPE html>
<!--
  Improved Linktree page for Collect Cards.
  Edit links.json to add or modify your social links. Images are loaded from the
  assets folder. The design adapts automatically to light or dark themes.
-->
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Collect Cards - Links</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <!-- Modern Google Font for a fresh look -->
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600&display=swap" rel="stylesheet">
  <!-- Font Awesome for social icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css">
  <!-- Favicon displayed in the browser tab -->
  <link rel="icon" type="image/png" href="assets/logo_without.png">
  <style>
    :root {
      --bg-color: #030f1b; /* Main background color */
      --button-bg: #ffffff;
      --button-color: #333333;
      --accent-color: #5468ff;
      --overlay-bg: rgba(0, 0, 0, 0.6);
    }

    /* Dark mode colors using prefers-color-scheme */
    @media (prefers-color-scheme: dark) {
      :root {
        --bg-color: #030f1b; /* Same background in dark mode */
        --button-bg: #2d2d2d;
        --button-color: #f5f5f5;
        --accent-color: #6a78ff;
        --overlay-bg: rgba(0, 0, 0, 0.8);
      }
    }

    body {
      font-family: 'Inter', Arial, sans-serif;
      background: var(--bg-color);
      color: #ffffff;
      display: flex;
      flex-direction: column;
      align-items: center;
      min-height: 100vh;
      margin: 0;
    }

    .hero {
      /* Constrain logo so it never exceeds half of the viewport height */
      width: 100%;
      max-height: 50vh;
      margin-top: 1rem;
      overflow: hidden;
    }

    .hero img {
      width: 100%;
      height: 100%;
      object-fit: contain; /* Prevent oversizing */
      display: block;
    }

    .container {
      text-align: center;
      padding: 1.5rem 1rem 2rem;
      width: 100%;
      max-width: 600px;
      /* Space the buttons below the hero image */
      margin-top: 2rem;
    }

    /* Removed corner logo: main hero already contains the branding */


    ul {
      list-style: none;
      padding: 0;
      margin: 0;
    }

    li {
      margin: 0.5rem 0;
    }

    .button {
      display: flex;
      align-items: center;
      justify-content: center;
      gap: 0.5rem;
      padding: 1rem 1.25rem;
      background: var(--button-bg);
      color: var(--button-color);
      text-decoration: none;
      border-radius: 30px;
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
      transition: transform 0.2s, box-shadow 0.2s, background 0.2s;
      font-weight: 600;
    }

    .button:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 14px rgba(0,0,0,0.15);
      background: var(--accent-color);
      color: #ffffff;
    }

    /* Overlay displayed when previewing a link */
    #preview-overlay {
      position: fixed;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: var(--overlay-bg);
      display: flex;
      align-items: center;
      justify-content: center;
      z-index: 100;
      opacity: 0;
      pointer-events: none;
      transition: opacity 0.25s ease;
    }

    /* Visible state for the overlay */
    #preview-overlay.active {
      opacity: 1;
      pointer-events: all;
    }

    .preview-content {
      text-align: center;
    }

    #preview-img {
      max-width: 90vw;
      max-height: 70vh;
      border-radius: 8px;
      box-shadow: 0 4px 12px rgba(0,0,0,0.3);
      margin-bottom: 1rem;
    }

    .preview-actions {
      display: flex;
      gap: 1rem;
      justify-content: center;
    }
  </style>
</head>
<body>
  <!-- Corner logo removed: brand already shown in hero image -->
  <div class="hero">
    <img src="assets/collect_cards.png" alt="Collect Cards">
  </div>
  <div class="container">
    <ul id="links"></ul>
  </div>
  <!-- Overlay used to display a preview image before leaving the page -->
  <div id="preview-overlay">
    <div class="preview-content">
      <img id="preview-img" src="" alt="PrÃ©visualisation du lien">
      <div class="preview-actions">
        <a id="preview-open" class="button" href="#" target="_blank" rel="noopener">Ouvrir</a>
        <button id="preview-close" class="button" type="button">Fermer</button>
      </div>
    </div>
  </div>
  <script>
    // Load links from links.json and build the list of buttons dynamically
    fetch('links.json')
      .then(function(response) { return response.json(); })
      .then(function(data) {
        var list = document.getElementById('links');
        data.links.forEach(function(link) {
          var li = document.createElement('li');
          var a = document.createElement('a');
          a.href = link.url;
          a.className = 'button';
          // Store preview image path if provided
          if (link.preview) {
            a.dataset.preview = link.preview;
          }
          if (link.icon) {
            var i = document.createElement('i');
            i.className = link.icon;
            a.appendChild(i);
          }
          var span = document.createElement('span');
          span.textContent = link.title;
          a.appendChild(span);
          li.appendChild(a);
          list.appendChild(li);

          // If a preview is specified, open overlay instead of navigating
          a.addEventListener('click', function(e) {
            if (this.dataset.preview) {
              e.preventDefault();
              showPreview(this.dataset.preview, this.href);
            }
          });
        });
      })
      .catch(function(err) {
        console.error('Failed to load links.json', err);
      });

    // Display the overlay with preview image and link
    // imgSrc: path of the preview image
    // url:    destination link opened when confirming
    function showPreview(imgSrc, url) {
      var overlay = document.getElementById('preview-overlay');
      document.getElementById('preview-img').src = imgSrc;
      document.getElementById('preview-open').href = url;
      overlay.classList.add('active');
    }

    // Hide overlay when clicking the close button
    document.getElementById('preview-close').addEventListener('click', function() {
      document.getElementById('preview-overlay').classList.remove('active');
    });

    // Also close the overlay when clicking outside the preview image
    document.getElementById('preview-overlay').addEventListener('click', function(e) {
      if (e.target === this) {
        this.classList.remove('active');
      }
    });
  </script>
</body>
</html>
